language: python

global:
 env:
  - LIBRDKAFKA_VERSION=v1.6.0-RC1

jobs:
  include:
    - name: "Windows x86"
      os: windows
      language: shell
      env:
         - ARCH=x86
         - BW_ARCH=win32
      before_install:
        - choco install python --version 3.8.0
        - export PATH="/c/Python38:/c/Python38/Scripts:$PATH"
        # make sure it's on PATH as 'python3'
        - ln -s /c/Python38/python.exe /c/Python38/python3.exe
    - name: "Windows x64"
      os: windows
      language: shell
      env:
         - ARCH=x64
         - BW_ARCH=win_amd64
      before_install:
        - choco install python --version 3.8.0
        - export PATH="/c/Python38:/c/Python38/Scripts:$PATH"
        # make sure it's on PATH as 'python3'
        - ln -s /c/Python38/python.exe /c/Python38/python3.exe

#    # perform a linux build
#    - services: docker
#    # and a mac build
#    - os: osx
#      language: shell

script:
  # build the wheels, put them into './wheelhouse'
  - ./build.bat ${ARCH} ${BW_ARCH}
  - dir wheelhouse
  - for f in wheelhouse/*whl ; do echo $f ; unzip -l $f ; done
  - echo Done
